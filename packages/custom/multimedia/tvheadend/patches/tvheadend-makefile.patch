diff -Naur a/configure b/configure
--- a/configure	2016-02-18 20:06:21.000000000 +0200
+++ b/configure	2016-02-18 23:58:56.657316731 +0200
@@ -23,8 +23,8 @@
   "linuxdvb:yes"
   "satip_server:yes"
   "satip_client:yes"
-  "hdhomerun_client:no"
-  "hdhomerun_static:yes"
+  "hdhomerun_client:auto"
+  "hdhomerun_static:no"
   "iptv:yes"
   "tsfile:yes"
   "dvbscan:yes"
@@ -34,7 +34,7 @@
   "avahi:auto"
   "zlib:auto"
   "libav:auto"
-  "libffmpeg_static:yes"
+  "libffmpeg_static:no"
   "libx264_static:yes"
   "libx265:no"
   "libx265_static:yes"
@@ -654,6 +654,7 @@
   fi
 fi
 
+
 # ###########################################################################
 # Write config
 # ###########################################################################
diff -Naur a/Makefile b/Makefile
--- a/Makefile	2016-02-18 20:06:21.000000000 +0200
+++ b/Makefile	2016-01-06 18:30:31.000000000 +0200
@@ -61,8 +61,8 @@
 
 ifeq ($(CONFIG_LIBFFMPEG_STATIC),yes)
 
-CFLAGS  += -I${BUILDDIR}/ffmpeg/build/ffmpeg/include
-LDFLAGS_FFDIR = ${BUILDDIR}/ffmpeg/build/ffmpeg/lib
+CFLAGS  += -I${ROOTDIR}/libav_static/build/ffmpeg/include
+LDFLAGS_FFDIR = ${ROOTDIR}/libav_static/build/ffmpeg/lib
 LDFLAGS += ${LDFLAGS_FFDIR}/libavresample.a
 LDFLAGS += ${LDFLAGS_FFDIR}/libswresample.a
 LDFLAGS += ${LDFLAGS_FFDIR}/libavfilter.a
@@ -112,9 +112,9 @@
 endif # CONFIG_LIBFFMPEG_STATIC
 
 ifeq ($(CONFIG_HDHOMERUN_STATIC),yes)
-CFLAGS  += -I$(BUILDDIR)/hdhomerun
-LDFLAGS += $(BUILDDIR)/hdhomerun/libhdhomerun/libhdhomerun.a \
-           -Wl,-Bstatic -Wl,-Bdynamic
+CFLAGS  += -I${ROOTDIR}/libhdhomerun_static
+LDFLAGS += -L${ROOTDIR}/libhdhomerun_static/libhdhomerun \
+           -Wl,-Bstatic -lhdhomerun -Wl,-Bdynamic
 endif
 
 vpath %.c $(ROOTDIR)
@@ -139,15 +139,12 @@
 # Debug/Output
 #
 
-BRIEF  = CC MKBUNDLE
 ifndef V
 ECHO   = printf "%-16s%s\n" $(1) $(2)
+BRIEF  = CC MKBUNDLE CXX
 MSG    = $(subst $(BUILDDIR)/,,$@)
 $(foreach VAR,$(BRIEF), \
-	$(eval p$(VAR) = @$$(call ECHO,$(VAR),$$(MSG)); $($(VAR))))
-else
-$(foreach VAR,$(BRIEF), \
-	$(eval p$(VAR) = $($(VAR))))
+	$(eval $(VAR) = @$$(call ECHO,$(VAR),$$(MSG)); $($(VAR))))
 endif
 
 #
@@ -191,7 +188,7 @@
 	src/trap.c \
 	src/avg.c \
 	src/htsstr.c \
-	src/tvhpoll.c \
+        src/tvhpoll.c \
 	src/huffman.c \
 	src/filebundle.c \
 	src/config.c \
@@ -332,9 +329,9 @@
 
 # MPEGTS DVB
 SRCS-MPEGTS-DVB = \
-	src/input/mpegts/mpegts_network_dvb.c \
-	src/input/mpegts/mpegts_mux_dvb.c \
-	src/input/mpegts/scanfile.c
+        src/input/mpegts/mpegts_network_dvb.c \
+        src/input/mpegts/mpegts_mux_dvb.c \
+        src/input/mpegts/scanfile.c
 SRCS-${CONFIG_MPEGTS_DVB} += $(SRCS-MPEGTS-DVB)
 I18N-C += $(SRCS-MPEGTS-DVB)
 
@@ -350,14 +347,14 @@
 
 # LINUX DVB
 SRCS-LINUXDVB = \
-	src/input/mpegts/linuxdvb/linuxdvb.c \
-	src/input/mpegts/linuxdvb/linuxdvb_adapter.c \
-	src/input/mpegts/linuxdvb/linuxdvb_frontend.c \
-	src/input/mpegts/linuxdvb/linuxdvb_satconf.c \
-	src/input/mpegts/linuxdvb/linuxdvb_lnb.c \
-	src/input/mpegts/linuxdvb/linuxdvb_switch.c \
-	src/input/mpegts/linuxdvb/linuxdvb_rotor.c \
-	src/input/mpegts/linuxdvb/linuxdvb_en50494.c
+        src/input/mpegts/linuxdvb/linuxdvb.c \
+        src/input/mpegts/linuxdvb/linuxdvb_adapter.c \
+        src/input/mpegts/linuxdvb/linuxdvb_frontend.c \
+        src/input/mpegts/linuxdvb/linuxdvb_satconf.c \
+        src/input/mpegts/linuxdvb/linuxdvb_lnb.c \
+        src/input/mpegts/linuxdvb/linuxdvb_switch.c \
+        src/input/mpegts/linuxdvb/linuxdvb_rotor.c \
+        src/input/mpegts/linuxdvb/linuxdvb_en50494.c
 SRCS-${CONFIG_LINUXDVB} += $(SRCS-LINUXDVB)
 I18N-C += $(SRCS-LINUXDVB)
 
@@ -372,31 +369,31 @@
 
 # HDHOMERUN
 SRCS-HDHOMERUN = \
-	src/input/mpegts/tvhdhomerun/tvhdhomerun.c \
-	src/input/mpegts/tvhdhomerun/tvhdhomerun_frontend.c
+        src/input/mpegts/tvhdhomerun/tvhdhomerun.c \
+        src/input/mpegts/tvhdhomerun/tvhdhomerun_frontend.c
 SRCS-${CONFIG_HDHOMERUN_CLIENT} += $(SRCS-HDHOMERUN)
 I18N-C += $(SRCS-HDHOMERUN)
 
 # IPTV
 SRCS-IPTV = \
 	src/input/mpegts/iptv/iptv.c \
-	src/input/mpegts/iptv/iptv_mux.c \
-	src/input/mpegts/iptv/iptv_service.c \
-	src/input/mpegts/iptv/iptv_http.c \
-	src/input/mpegts/iptv/iptv_udp.c \
-	src/input/mpegts/iptv/iptv_rtsp.c \
-	src/input/mpegts/iptv/iptv_rtcp.c \
-	src/input/mpegts/iptv/iptv_pipe.c \
-	src/input/mpegts/iptv/iptv_file.c \
+        src/input/mpegts/iptv/iptv_mux.c \
+        src/input/mpegts/iptv/iptv_service.c \
+        src/input/mpegts/iptv/iptv_http.c \
+        src/input/mpegts/iptv/iptv_udp.c \
+        src/input/mpegts/iptv/iptv_rtsp.c \
+        src/input/mpegts/iptv/iptv_rtcp.c \
+        src/input/mpegts/iptv/iptv_pipe.c \
+        src/input/mpegts/iptv/iptv_file.c \
 	src/input/mpegts/iptv/iptv_auto.c
 SRCS-${CONFIG_IPTV} += $(SRCS-IPTV)
 I18N-C += $(SRCS-IPTV)
 
 # TSfile
 SRCS-TSFILE = \
-	src/input/mpegts/tsfile/tsfile.c \
-	src/input/mpegts/tsfile/tsfile_input.c \
-	src/input/mpegts/tsfile/tsfile_mux.c
+        src/input/mpegts/tsfile/tsfile.c \
+        src/input/mpegts/tsfile/tsfile_input.c \
+        src/input/mpegts/tsfile/tsfile_mux.c
 SRCS-$(CONFIG_TSFILE) += $(SRCS-TSFILE)
 I18N-C += $(SRCS-TSFILE)
 
@@ -485,7 +482,7 @@
 
 ifeq ($(FFDECSA-yes),yes)
 SRCS-yes += src/descrambler/ffdecsa/ffdecsa_interface.c \
-	src/descrambler/ffdecsa/ffdecsa_int.c
+	    src/descrambler/ffdecsa/ffdecsa_int.c
 SRCS-${CONFIG_MMX}  += src/descrambler/ffdecsa/ffdecsa_mmx.c
 SRCS-${CONFIG_SSE2} += src/descrambler/ffdecsa/ffdecsa_sse2.c
 ${BUILDDIR}/src/descrambler/ffdecsa/ffdecsa_mmx.o  : CFLAGS += -mmmx
@@ -516,9 +513,9 @@
 
 define merge-po
 	@if ! test -r "$(1)"; then \
-		sed -e 's/Content-Type: text\/plain; charset=CHARSET/Content-Type: text\/plain; charset=utf-8/' < "$(2)" > "$(1).new"; \
+	  sed -e 's/Content-Type: text\/plain; charset=CHARSET/Content-Type: text\/plain; charset=utf-8/' < "$(2)" > "$(1).new"; \
 	else \
-		$(MSGMERGE) -o $(1).new $(1) $(2); \
+	  $(MSGMERGE) -o $(1).new $(1) $(2); \
 	fi
 	@mv $(1).new $(1)
 endef
@@ -567,17 +564,17 @@
 
 # Binary
 ${PROG}: .config.mk make_webui $(OBJS)
-	$(pCC) -o $@ $(OBJS) $(CFLAGS) $(LDFLAGS)
+	$(CC) -o $@ $(OBJS) $(CFLAGS) $(LDFLAGS)
 
 # Object
 ${BUILDDIR}/%.o: %.c
 	@mkdir -p $(dir $@)
-	$(pCC) -MD -MP $(CFLAGS) -c -o $@ $<
+	$(CC) -MD -MP $(CFLAGS) -c -o $@ $<
 
 # Add-on
 ${BUILDDIR}/%.so: ${SRCS_EXTRA}
 	@mkdir -p $(dir $@)
-	${pCC} -O -fbuiltin -fomit-frame-pointer -fPIC -shared -o $@ $< -ldl
+	${CC} -O -fbuiltin -fomit-frame-pointer -fPIC -shared -o $@ $< -ldl
 
 # Clean
 .PHONY: clean
@@ -590,6 +587,8 @@
 # Distclean
 .PHONY: distclean
 distclean: clean
+	rm -rf ${ROOTDIR}/libav_static
+	rm -rf ${ROOTDIR}/libhdhomerun_static
 	rm -rf ${ROOTDIR}/build.*
 	rm -rf ${ROOTDIR}/data/dvb-scan
 	rm -f ${ROOTDIR}/.config.mk
@@ -616,11 +615,11 @@
 	@echo 'const char* build_timestamp = "'`date -Iseconds`'";' >> $@
 
 $(BUILDDIR)/timestamp.o: $(BUILDDIR)/timestamp.c
-	$(pCC) -c -o $@ $<
+	$(CC) -c -o $@ $<
 
 $(BUILDDIR)/build.o: $(BUILDDIR)/build.c
 	@mkdir -p $(dir $@)
-	$(pCC) -c -o $@ $<
+	$(CC) -c -o $@ $<
 
 # Internationalization
 .PHONY: intl
@@ -669,11 +668,11 @@
 # Bundle files
 $(BUILDDIR)/bundle.o: $(BUILDDIR)/bundle.c
 	@mkdir -p $(dir $@)
-	$(pCC) -I${ROOTDIR}/src -c -o $@ $<
+	$(CC) -I${ROOTDIR}/src -c -o $@ $<
 
 $(BUILDDIR)/bundle.c: check_dvb_scan make_webui
 	@mkdir -p $(dir $@)
-	$(pMKBUNDLE) -o $@ -d ${BUILDDIR}/bundle.d $(BUNDLE_FLAGS) $(BUNDLES:%=$(ROOTDIR)/%)
+	$(MKBUNDLE) -o $@ -d ${BUILDDIR}/bundle.d $(BUNDLE_FLAGS) $(BUNDLES:%=$(ROOTDIR)/%)
 
 .PHONY: make_webui
 make_webui:
@@ -685,11 +684,11 @@
 src/libav.h ${SRCS-LIBAV} ${DEPS-LIBAV}: ${BUILDDIR}/libffmpeg_stamp
 endif
 
-${BUILDDIR}/libffmpeg_stamp: ${BUILDDIR}/ffmpeg/build/ffmpeg/lib/libavcodec.a
+${BUILDDIR}/libffmpeg_stamp: ${ROOTDIR}/libav_static/build/ffmpeg/lib/libavcodec.a
 	@touch $@
 
-${BUILDDIR}/ffmpeg/build/ffmpeg/lib/libavcodec.a: Makefile.ffmpeg
-	$(MAKE) -f Makefile.ffmpeg
+${ROOTDIR}/libav_static/build/ffmpeg/lib/libavcodec.a: Makefile.ffmpeg
+	$(MAKE) -f Makefile.ffmpeg build
 
 # Static HDHOMERUN library
 
@@ -697,15 +696,15 @@
 src/input/mpegts/tvhdhomerun/tvhdhomerun_private.h ${SRCS-HDHOMERUN}: ${BUILDDIR}/libhdhomerun_stamp
 endif
 
-${BUILDDIR}/libhdhomerun_stamp: ${BUILDDIR}/hdhomerun/libhdhomerun/libhdhomerun.a
+${BUILDDIR}/libhdhomerun_stamp: ${ROOTDIR}/libhdhomerun_static/libhdhomerun/libhdhomerun.a
 	@touch $@
 
-${BUILDDIR}/hdhomerun/libhdhomerun/libhdhomerun.a: Makefile.hdhomerun
-	$(MAKE) -f Makefile.hdhomerun
+${ROOTDIR}/libhdhomerun_static/libhdhomerun/libhdhomerun.a: Makefile.hdhomerun
+	$(MAKE) -f Makefile.hdhomerun build
 
 # linuxdvb git tree
 $(ROOTDIR)/data/dvb-scan/.stamp:
-	@echo "Receiving data/dvb-scan/dvb-t from https://github.com/tvheadend/dtv-scan-tables.git#tvheadend"
+	@echo "Receiving data/dvb-scan/dvb-t from http://linuxtv.org/git/dtv-scan-tables.git"
 	@rm -rf $(ROOTDIR)/data/dvb-scan/*
 	@$(ROOTDIR)/support/getmuxlist $(ROOTDIR)/data/dvb-scan
 	@touch $@
diff -Naur a/Makefile.ffmpeg b/Makefile.ffmpeg
--- a/Makefile.ffmpeg	2016-02-18 20:06:21.000000000 +0200
+++ b/Makefile.ffmpeg	2016-01-06 18:30:31.000000000 +0200
@@ -16,28 +16,57 @@
 #  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #
 
-DIR :=  $(dir $(lastword $(MAKEFILE_LIST)))
-include $(DIR)/.config.mk
+include $(dir $(lastword $(MAKEFILE_LIST))).config.mk
 
 unexport CFLAGS
 unexport LDFLAGS
 
-# ###########################################################################
-# Upstream Packages
-# ###########################################################################
+define DOWNLOAD
+	@mkdir -p $(LIBAVDIR)/build
+	@if test -z "$${TVHEADEND_FILE_CACHE}"; then \
+	  printf "WGET            $(1)\n"; \
+	  wget --no-verbose -O $(2) $(1); \
+	else \
+	  file=$$(basename $(2)); \
+	  cp "$$TVHEADEND_FILE_CACHE/$$(file)" $(2); \
+	fi
+	@{ \
+	  sum=$$(sha1sum $(2) | cut -d ' ' -f 1); \
+	  printf "SHA1SUM test '$${sum}' == '$(3)': "; \
+	  test "y$${sum}" = "y$(3)"; \
+	}
+	@echo "OK"
+endef
+
+define UNTAR
+	@{ \
+	  printf "UNTAR           $(1)\n"; \
+	  tar x -C $(LIBAVDIR) -$(2)f $(LIBAVDIR)/$(1); \
+	}
+endef
+
+LIBAVDIR = $(ROOTDIR)/libav_static
+
+export PATH := $(LIBAVDIR)/build/ffmpeg/bin:$(PATH)
+
+ECFLAGS         = -I$(LIBAVDIR)/build/ffmpeg/include
+ELIBS           = -L$(LIBAVDIR)/build/ffmpeg/lib -ldl
+
+EXTRAENV        =
+CONFIGURE       = TVHEADEND_LIBAV_BUILD=$(LIBAVDIR)/build/ffmpeg \
+                  PKG_CONFIG=$(ROOTDIR)/support/pkg-config.ffmpeg ./configure
 
-FFMPEG          = ffmpeg-2.8.5
+FFMPEG          = ffmpeg-2.8.2
 FFMPEG_TB       = $(FFMPEG).tar.bz2
 FFMPEG_URL      = http://ffmpeg.org/releases/$(FFMPEG_TB)
-FFMPEG_SHA1     = 74f82c0bdaada050ada9010ecb574fb02d434c00
-FFMPEG_DIFFS    =
+FFMPEG_SHA1     = 1952aeb9ec3f569514d8db4f30c195b765392639
 
 EXTLIBS         = libx264 libvorbis libvpx
 COMPONENTS      = avutil avformat avcodec swresample swscale avfilter avresample
 PROTOCOLS       = file
 DECODERS        = mpeg2video mp2 ac3 eac3 h264 h264_vdpau hevc aac aac_latm vorbis libvorbis
 ENCODERS        = mpeg2video mp2 libx264 libvpx_vp8 libvpx_vp9 aac libaacplus vorbis libvorbis
-MUXERS          = mpegts mpeg2dvd matroska webm mp4
+MUXERS          = mpegts mpeg2dvd matroska webm
 BSFS            = h264_mp4toannexb hevc_mp4toannexb
 FILTERS         = yadif scale
 
@@ -51,15 +80,15 @@
 LIBVORBIS_URL   = http://downloads.xiph.org/releases/vorbis/$(LIBVORBIS_TB)
 LIBVORBIS_SHA1  = 10c7fee173178d72855aa7593dfe49d9b3d6c804
 
-LIBX264         = x264-snapshot-20160217-2245
+LIBX264         = x264-snapshot-20151120-2245
 LIBX264_TB      = $(LIBX264).tar.bz2
 LIBX264_URL     = http://ftp.via.ecp.fr/pub/videolan/x264/snapshots/$(LIBX264_TB)
-LIBX264_SHA1    = e3b9d6f3372c9052fac3bffe7175518bb269a359
+LIBX264_SHA1    = 6ca54b8e257ef52f55c752e94e77dbc93fe32fe4
 
-LIBX265         = x265_1.9
+LIBX265         = x265_1.8
 LIBX265_TB      = $(LIBX265).tar.gz
 LIBX265_URL     = http://ftp.videolan.org/pub/videolan/x265/$(LIBX265_TB)
-LIBX265_SHA1    = 8c9aa3b87b0f0a418bbb9782e9354d112d75e003
+LIBX265_SHA1    = 10092d220cd361868672641b8ce7b575cb42bb82
 
 LIBVPX          = libvpx-1.5.0
 LIBVPX_TB       = $(LIBVPX).tar.bz2
@@ -77,65 +106,24 @@
 LIBMFX_URL      = https://github.com/lu-zero/mfx_dispatch/archive/$(LIBMFX_TB)
 LIBMFX_SHA1     = e7905a4e18f8d3933f23ed5cf5a96a40a31c76a8
 
-# ###########################################################################
-# Library Config
-# ###########################################################################
-
-LIB_NAME  := ffmpeg
-LIB_ROOT  := $(BUILDDIR)/$(LIB_NAME)
-LIB_FILES :=\
-	$(LIB_ROOT)/$(FFMPEG)/.tvh_download \
-	$(LIB_ROOT)/$(FFMPEG)/.tvh_build \
-	$(LIB_ROOT)/$(LIBOGG)/.tvh_download \
-	$(LIB_ROOT)/$(LIBOGG)/.tvh_build \
-	$(LIB_ROOT)/$(LIBVORBIS)/.tvh_download \
-	$(LIB_ROOT)/$(LIBVORBIS)/.tvh_build \
-	$(LIB_ROOT)/$(LIBX264)/.tvh_download \
-	$(LIB_ROOT)/$(LIBX264)/.tvh_build \
-	$(LIB_ROOT)/$(LIBX265)/.tvh_download \
-	$(LIB_ROOT)/$(LIBX265)/.tvh_build \
-	$(LIB_ROOT)/$(LIBVPX)/.tvh_download \
-	$(LIB_ROOT)/$(LIBVPX)/.tvh_build \
-	$(LIB_ROOT)/$(YASM)/.tvh_download \
-	$(LIB_ROOT)/$(YASM)/.tvh_build \
-	$(LIB_ROOT)/$(LIBMFX)/.tvh_download \
-	$(LIB_ROOT)/$(LIBMFX)/.tvh_build \
-	$(LIB_ROOT)/build/ffmpeg/lib/*.a \
-	$(LIB_ROOT)/build/ffmpeg/include/*
-
-include $(DIR)/Makefile.static
-
-.PHONY: build $(PHONY)
-build: $(LIB_ROOT)/$(FFMPEG)/.tvh_build
-
-# ###########################################################################
-# Build Rules
-# ###########################################################################
-
-export PATH := $(LIB_ROOT)/build/ffmpeg/bin:$(PATH)
-
-ECFLAGS      = -I$(LIB_ROOT)/build/ffmpeg/include
-ELIBS        = -L$(LIB_ROOT)/build/ffmpeg/lib -ldl
-
-EXTRAENV     =
-CONFIGURE    = TVHEADEND_LIBAV_BUILD=$(LIB_ROOT)/build/ffmpeg \
-  PKG_CONFIG=$(ROOTDIR)/support/pkg-config.ffmpeg ./configure
+
+.PHONY: build
+build: $(LIBAVDIR)/$(FFMPEG)/.tvh_build
 
 #
 # YASM
 #
-
-$(LIB_ROOT)/$(YASM)/.tvh_download:
-	$(call DOWNLOAD,$(YASM_URL),$(LIB_ROOT)/$(YASM_TB),$(YASM_SHA1))
+$(LIBAVDIR)/$(YASM)/.tvh_download:
+	$(call DOWNLOAD,$(YASM_URL),$(LIBAVDIR)/$(YASM_TB),$(YASM_SHA1))
 	$(call UNTAR,$(YASM_TB),z)
 	@touch $@
 
-$(LIB_ROOT)/$(YASM)/.tvh_build: \
-		$(LIB_ROOT)/$(YASM)/.tvh_download
-	cd $(LIB_ROOT)/$(YASM) && $(CONFIGURE) \
+$(LIBAVDIR)/$(YASM)/.tvh_build: \
+		$(LIBAVDIR)/$(YASM)/.tvh_download
+	cd $(LIBAVDIR)/$(YASM) && $(CONFIGURE) \
                 --prefix=/ffmpeg
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(YASM) install
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(YASM) install
 	@touch $@
 
 #
@@ -185,20 +173,20 @@
 
 ifeq (yes,$(CONFIG_LIBMFX_STATIC))
 
-$(LIB_ROOT)/$(LIBMFX)/.tvh_download:
-	$(call DOWNLOAD,$(LIBMFX_URL),$(LIB_ROOT)/$(LIBMFX_TB),$(LIBMFX_SHA1))
+$(LIBAVDIR)/$(LIBMFX)/.tvh_download:
+	$(call DOWNLOAD,$(LIBMFX_URL),$(LIBAVDIR)/$(LIBMFX_TB),$(LIBMFX_SHA1))
 	$(call UNTAR,$(LIBMFX_TB),z)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBMFX)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBMFX)/.tvh_download
-	cd $(LIB_ROOT)/$(LIBMFX) && autoreconf -i
-	cd $(LIB_ROOT)/$(LIBMFX) && ./configure \
+$(LIBAVDIR)/$(LIBMFX)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBMFX)/.tvh_download
+	cd $(LIBAVDIR)/$(LIBMFX) && autoreconf -i
+	cd $(LIBAVDIR)/$(LIBMFX) && ./configure \
 		--prefix=/ffmpeg \
 		--enable-static \
 		--disable-shared
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBMFX) install
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBMFX) install
 	@touch $@
 
 else
@@ -208,12 +196,12 @@
 
 EXTRAENV += TVHEADEND_LIBMFX_CFLAGS="$(LIBMFX_CFLAGS)" TVHEADEND_LIBMFX_LIBS="$(LIBMFX_LIBS)"
 
-$(LIB_ROOT)/$(LIBMFX)/.tvh_download:
-	@mkdir -p $(LIB_ROOT)/$(LIBMFX)
+$(LIBAVDIR)/$(LIBMFX)/.tvh_download:
+	@mkdir -p $(LIBAVDIR)/$(LIBMFX)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBMFX)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBMFX)/.tvh_download
+$(LIBAVDIR)/$(LIBMFX)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBMFX)/.tvh_download
 	@touch $@
 
 endif
@@ -222,39 +210,39 @@
 # libogg & libvorbis
 #
 
-$(LIB_ROOT)/$(LIBOGG)/.tvh_download:
-	$(call DOWNLOAD,$(LIBOGG_URL),$(LIB_ROOT)/$(LIBOGG_TB),$(LIBOGG_SHA1))
+$(LIBAVDIR)/$(LIBOGG)/.tvh_download:
+	$(call DOWNLOAD,$(LIBOGG_URL),$(LIBAVDIR)/$(LIBOGG_TB),$(LIBOGG_SHA1))
 	$(call UNTAR,$(LIBOGG_TB),z)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBOGG)/.tvh_build: \
-		$(LIB_ROOT)/$(YASM)/.tvh_build \
-		$(LIB_ROOT)/$(LIBOGG)/.tvh_download
-	cd $(LIB_ROOT)/$(LIBOGG) && $(CONFIGURE) \
+$(LIBAVDIR)/$(LIBOGG)/.tvh_build: \
+		$(LIBAVDIR)/$(YASM)/.tvh_build \
+		$(LIBAVDIR)/$(LIBOGG)/.tvh_download
+	cd $(LIBAVDIR)/$(LIBOGG) && $(CONFIGURE) \
 		--prefix=/ffmpeg \
 		--enable-static \
 		--disable-shared
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBOGG) install
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBOGG) install
 	@touch $@
 
-$(LIB_ROOT)/$(LIBVORBIS)/.tvh_download: \
-		$(LIB_ROOT)/$(LIBOGG)/.tvh_download
-	$(call DOWNLOAD,$(LIBVORBIS_URL),$(LIB_ROOT)/$(LIBVORBIS_TB),$(LIBVORBIS_SHA1))
+$(LIBAVDIR)/$(LIBVORBIS)/.tvh_download: \
+		$(LIBAVDIR)/$(LIBOGG)/.tvh_download
+	$(call DOWNLOAD,$(LIBVORBIS_URL),$(LIBAVDIR)/$(LIBVORBIS_TB),$(LIBVORBIS_SHA1))
 	$(call UNTAR,$(LIBVORBIS_TB),z)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBVORBIS)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBVORBIS)/.tvh_download \
-		$(LIB_ROOT)/$(YASM)/.tvh_build \
-		$(LIB_ROOT)/$(LIBOGG)/.tvh_build
-	cd $(LIB_ROOT)/$(LIBVORBIS) && $(CONFIGURE) \
+$(LIBAVDIR)/$(LIBVORBIS)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBVORBIS)/.tvh_download \
+		$(LIBAVDIR)/$(YASM)/.tvh_build \
+		$(LIBAVDIR)/$(LIBOGG)/.tvh_build
+	cd $(LIBAVDIR)/$(LIBVORBIS) && $(CONFIGURE) \
 		--prefix=/ffmpeg \
 		--enable-static \
 		--disable-shared \
-		--with-ogg=$(LIB_ROOT)/build/ffmpeg
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBVORBIS) install
+		--with-ogg=$(LIBAVDIR)/build/ffmpeg
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBVORBIS) install
 	@touch $@
 
 #
@@ -263,31 +251,27 @@
 
 ifneq (yes,$(CONFIG_LIBX264_STATIC))
 
-$(LIB_ROOT)/$(LIBX264)/.tvh_download:
+$(LIBAVDIR)/$(LIBX264)/.tvh_download:
 	@echo "***** LIBX264 STATIC BUILD IS DISABLED, USING INSTALLED PACKAGE *****"
-	@mkdir -p $(LIB_ROOT)/$(LIBX264)
+	@mkdir -p $(LIBAVDIR)/$(LIBX264)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBX264)/.tvh_build: $(LIB_ROOT)/$(LIBX264)/.tvh_download
+$(LIBAVDIR)/$(LIBX264)/.tvh_build: $(LIBAVDIR)/$(LIBX264)/.tvh_download
 	@touch $@
 
 else
 
-ifneq (,$(DEB_BUILD_GNU_TYPE))
-LIBX264_HOST := --host=$(DEB_BUILD_GNU_TYPE)
-endif
-
-$(LIB_ROOT)/$(LIBX264)/.tvh_download:
-	$(call DOWNLOAD,$(LIBX264_URL),$(LIB_ROOT)/$(LIBX264_TB),$(LIBX264_SHA1))
-	#rm -rf $(LIB_ROOT)/x264-snapshot-*
+$(LIBAVDIR)/$(LIBX264)/.tvh_download:
+	$(call DOWNLOAD,$(LIBX264_URL),$(LIBAVDIR)/$(LIBX264_TB),$(LIBX264_SHA1))
+	#rm -rf $(LIBAVDIR)/x264-snapshot-*
 	$(call UNTAR,$(LIBX264_TB),j)
-	#{ ln -sf $$(basename $(LIB_ROOT)/x264-snapshot-*) $(LIB_ROOT)/$(LIBX264); }
+	#{ ln -sf $$(basename $(LIBAVDIR)/x264-snapshot-*) $(LIBAVDIR)/$(LIBX264); }
 	@touch $@
 
-$(LIB_ROOT)/$(LIBX264)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBX264)/.tvh_download \
-		$(LIB_ROOT)/$(YASM)/.tvh_build
-	cd $(LIB_ROOT)/$(LIBX264) && $(CONFIGURE) \
+$(LIBAVDIR)/$(LIBX264)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBX264)/.tvh_download \
+		$(LIBAVDIR)/$(YASM)/.tvh_build
+	cd $(LIBAVDIR)/$(LIBX264) && $(CONFIGURE) \
 		--prefix=/ffmpeg \
 		--enable-static \
 		--disable-shared \
@@ -296,10 +280,9 @@
 		--disable-lavf \
 		--disable-ffms \
 		--disable-gpac \
-		--disable-lsmash \
-		$(LIBX264_HOST)
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBX264) install
+		--disable-lsmash
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBX264) install
 	@touch $@
 
 endif
@@ -318,30 +301,30 @@
 
 ifeq (yes,$(CONFIG_LIBX265_STATIC))
 
-$(LIB_ROOT)/$(LIBX265)/.tvh_download:
-	$(call DOWNLOAD,$(LIBX265_URL),$(LIB_ROOT)/$(LIBX265_TB),$(LIBX265_SHA1))
+$(LIBAVDIR)/$(LIBX265)/.tvh_download:
+	$(call DOWNLOAD,$(LIBX265_URL),$(LIBAVDIR)/$(LIBX265_TB),$(LIBX265_SHA1))
 	$(call UNTAR,$(LIBX265_TB),z)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBX265)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBX265)/.tvh_download \
-		$(LIB_ROOT)/$(YASM)/.tvh_build
-	cd $(LIB_ROOT)/$(LIBX265)/build/linux && cmake \
+$(LIBAVDIR)/$(LIBX265)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBX265)/.tvh_download \
+		$(LIBAVDIR)/$(YASM)/.tvh_build
+	cd $(LIBAVDIR)/$(LIBX265)/build/linux && cmake \
 		-G "Unix Makefiles" \
 		-DCMAKE_INSTALL_PREFIX="/ffmpeg" \
 		-DENABLE_SHARED:bool=off \
 		../../source
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBX265)/build/linux install
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBX265)/build/linux install
 	@touch $@
 
 else
 
-$(LIB_ROOT)/$(LIBX265)/.tvh_download:
-	@mkdir -p $(LIB_ROOT)/$(LIBX265)
+$(LIBAVDIR)/$(LIBX265)/.tvh_download:
+	@mkdir -p $(LIBAVDIR)/$(LIBX265)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBX265)/.tvh_build: $(LIB_ROOT)/$(LIBX265)/.tvh_download
+$(LIBAVDIR)/$(LIBX265)/.tvh_build: $(LIBAVDIR)/$(LIBX265)/.tvh_download
 	@touch $@
 
 endif
@@ -350,43 +333,65 @@
 # libvpx (VP8)
 #
 
-$(LIB_ROOT)/$(LIBVPX)/.tvh_download:
-	@mkdir -p $(LIB_ROOT)
-	$(call DOWNLOAD,$(LIBVPX_URL),$(LIB_ROOT)/$(LIBVPX_TB),$(LIBVPX_SHA1))
+$(LIBAVDIR)/$(LIBVPX)/.tvh_download:
+	@mkdir -p $(LIBAVDIR)
+	$(call DOWNLOAD,$(LIBVPX_URL),$(LIBAVDIR)/$(LIBVPX_TB),$(LIBVPX_SHA1))
 	$(call UNTAR,$(LIBVPX_TB),j)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBVPX)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBVPX)/.tvh_download \
-		$(LIB_ROOT)/$(YASM)/.tvh_build
-	cd $(LIB_ROOT)/$(LIBVPX) && $(CONFIGURE) \
+$(LIBAVDIR)/$(LIBVPX)/.tvh_build: \
+		$(LIBAVDIR)/$(LIBVPX)/.tvh_download \
+		$(LIBAVDIR)/$(YASM)/.tvh_build
+	cd $(LIBAVDIR)/$(LIBVPX) && $(CONFIGURE) \
 		--prefix=/ffmpeg \
 		--enable-static \
 		--disable-shared
-	DIST_DIR=$(LIB_ROOT)/build/ffmpeg \
-		$(MAKE) -C $(LIB_ROOT)/$(LIBVPX) install
+	DIST_DIR=$(LIBAVDIR)/build/ffmpeg \
+		$(MAKE) -C $(LIBAVDIR)/$(LIBVPX) install
 	@touch $@
 
 #
 # FFMPEG
 #
 
-$(LIB_ROOT)/$(FFMPEG)/.tvh_download:
-	@mkdir -p $(LIB_ROOT)/build
-	$(call DOWNLOAD,$(FFMPEG_URL),$(LIB_ROOT)/$(FFMPEG_TB),$(FFMPEG_SHA1))
+$(LIBAVDIR)/$(FFMPEG)/.tvh_download:
+	@mkdir -p $(LIBAVDIR)/build
+	$(call DOWNLOAD,$(FFMPEG_URL),$(LIBAVDIR)/$(FFMPEG_TB),$(FFMPEG_SHA1))
 	$(call UNTAR,$(FFMPEG_TB),j)
-	$(call PATCH,$(FFMPEG),$(FFMPEG_DIFFS))
-	@touch $@
-
-$(LIB_ROOT)/$(FFMPEG)/.tvh_build: \
-		$(LIB_ROOT)/$(YASM)/.tvh_build \
-		$(LIB_ROOT)/$(LIBVORBIS)/.tvh_build \
-		$(LIB_ROOT)/$(LIBX264)/.tvh_build \
-		$(LIB_ROOT)/$(LIBX265)/.tvh_build \
-		$(LIB_ROOT)/$(LIBVPX)/.tvh_build \
-		$(LIB_ROOT)/$(LIBMFX)/.tvh_build \
-		$(LIB_ROOT)/$(FFMPEG)/.tvh_download
-	cd $(LIB_ROOT)/$(FFMPEG) && $(EXTRAENV) $(CONFIGURE) \
+	@cd $(LIBAVDIR)/$(FFMPEG) && echo -en "\
+--- libavcodec/libvpxenc.c.old	2015-11-21 21:52:16.502341511 +0100\n\
++++ libavcodec/libvpxenc.c	2015-11-21 21:53:18.164552128 +0100\n\
+@@ -104,19 +104,11 @@\n\
+ \n\
+ /** String mappings for enum vp8e_enc_control_id */\n\
+ static const char *const ctlidstr[] = {\n\
+-    [VP8E_UPD_ENTROPY]           = \"VP8E_UPD_ENTROPY\",\n\
+-    [VP8E_UPD_REFERENCE]         = \"VP8E_UPD_REFERENCE\",\n\
+-    [VP8E_USE_REFERENCE]         = \"VP8E_USE_REFERENCE\",\n\
+-    [VP8E_SET_ROI_MAP]           = \"VP8E_SET_ROI_MAP\",\n\
+-    [VP8E_SET_ACTIVEMAP]         = \"VP8E_SET_ACTIVEMAP\",\n\
+-    [VP8E_SET_SCALEMODE]         = \"VP8E_SET_SCALEMODE\",\n\
+     [VP8E_SET_CPUUSED]           = \"VP8E_SET_CPUUSED\",\n\
+     [VP8E_SET_ENABLEAUTOALTREF]  = \"VP8E_SET_ENABLEAUTOALTREF\",\n\
+     [VP8E_SET_NOISE_SENSITIVITY] = \"VP8E_SET_NOISE_SENSITIVITY\",\n\
+-    [VP8E_SET_SHARPNESS]         = \"VP8E_SET_SHARPNESS\",\n\
+     [VP8E_SET_STATIC_THRESHOLD]  = \"VP8E_SET_STATIC_THRESHOLD\",\n\
+     [VP8E_SET_TOKEN_PARTITIONS]  = \"VP8E_SET_TOKEN_PARTITIONS\",\n\
+-    [VP8E_GET_LAST_QUANTIZER]    = \"VP8E_GET_LAST_QUANTIZER\",\n\
+     [VP8E_SET_ARNR_MAXFRAMES]    = \"VP8E_SET_ARNR_MAXFRAMES\",\n\
+     [VP8E_SET_ARNR_STRENGTH]     = \"VP8E_SET_ARNR_STRENGTH\",\n\
+     [VP8E_SET_ARNR_TYPE]         = \"VP8E_SET_ARNR_TYPE\",\n" | patch -p0
+	@touch $@
+
+$(LIBAVDIR)/$(FFMPEG)/.tvh_build: \
+		$(LIBAVDIR)/$(YASM)/.tvh_build \
+		$(LIBAVDIR)/$(LIBVORBIS)/.tvh_build \
+		$(LIBAVDIR)/$(LIBX264)/.tvh_build \
+		$(LIBAVDIR)/$(LIBX265)/.tvh_build \
+		$(LIBAVDIR)/$(LIBVPX)/.tvh_build \
+		$(LIBAVDIR)/$(LIBMFX)/.tvh_build \
+		$(LIBAVDIR)/$(FFMPEG)/.tvh_download
+	cd $(LIBAVDIR)/$(FFMPEG) && $(EXTRAENV) $(CONFIGURE) \
                 --prefix=/ffmpeg \
 		--disable-all \
 		--enable-static \
@@ -395,7 +400,6 @@
 		--extra-cflags="$(ECFLAGS)" \
 		--extra-libs="$(ELIBS)" \
                 --pkg-config="$(ROOTDIR)/support/pkg-config.ffmpeg" \
-		$(EXTRAARG) \
 		$(foreach extlib,$(EXTLIBS),--enable-$(extlib)) \
 		$(foreach component,$(COMPONENTS),--enable-$(component)) \
 		$(foreach protocol,$(PROTOCOLS),--enable-protocol=$(protocol)) \
@@ -404,6 +408,10 @@
 		$(foreach muxer,$(MUXERS),--enable-muxer=$(muxer)) \
 		$(foreach bsf,$(BSFS),--enable-bsf=$(bsf)) \
 		$(foreach filter,$(FILTERS),--enable-filter=$(filter))
-	DESTDIR=$(LIB_ROOT)/build \
-		$(MAKE) -C $(LIB_ROOT)/$(FFMPEG) install
+	DESTDIR=$(LIBAVDIR)/build \
+		$(MAKE) -C $(LIBAVDIR)/$(FFMPEG) install
 	@touch $@
+
+.PHONY: static_libav_clean
+static_libav_clean:
+	@rm -rf $(LIBAVDIR)
diff -Naur a/Makefile.hdhomerun b/Makefile.hdhomerun
--- a/Makefile.hdhomerun	2016-02-18 20:06:21.000000000 +0200
+++ b/Makefile.hdhomerun	2016-01-06 18:30:31.000000000 +0200
@@ -16,69 +16,72 @@
 #  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #
 
-DIR :=  $(dir $(lastword $(MAKEFILE_LIST)))
-include $(DIR)/.config.mk
+include $(dir $(lastword $(MAKEFILE_LIST))).config.mk
 
 unexport CFLAGS
 unexport LDFLAGS
 
-# ###########################################################################
-# Upstream Packages
-# ###########################################################################
+define DOWNLOAD
+	@mkdir -p $(LIBHDHRDIR)/build
+	@if test -z "$${TVHEADEND_FILE_CACHE}"; then \
+	  printf "WGET            $(1)\n"; \
+	  wget --no-verbose -O $(2) $(1); \
+	else \
+	  file=$$(basename $(2)); \
+	  cp "$$TVHEADEND_FILE_CACHE/$$(file)" $(2); \
+	fi
+	@{ \
+	  sum=$$(sha1sum $(2) | cut -d ' ' -f 1); \
+	  printf "SHA1SUM test '$${sum}' == '$(3)': "; \
+	  test "y$${sum}" = "y$(3)"; \
+	}
+	@echo "OK"
+endef
+
+define UNTAR
+	@{ \
+	  printf "UNTAR           $(1)\n"; \
+	  tar x -C $(LIBHDHRDIR) -$(2)f $(LIBHDHRDIR)/$(1); \
+	}
+endef
+
+LIBHDHRDIR = $(ROOTDIR)/libhdhomerun_static
+
+export PATH := $(LIBHDHRDIR)/build/bin:$(PATH)
 
 LIBHDHR         = libhdhomerun_20150826
 LIBHDHR_TB      = $(LIBHDHR).tgz
 LIBHDHR_URL     = http://download.silicondust.com/hdhomerun/$(LIBHDHR_TB)
 LIBHDHR_SHA1    = 24ce6003b1e815ec4c642d180b621c1d524ca1cf
 
-# ###########################################################################
-# Library Config
-# ###########################################################################
-
-LIB_NAME       := hdhomerun
-LIB_ROOT       := $(BUILDDIR)/$(LIB_NAME)
-LIB_FILES      := \
-	$(LIB_ROOT)/$(LIBHDHR)/.tvh_download\
-	$(LIB_ROOT)/$(LIBHDHR)/.tvh_build\
-	$(LIB_ROOT)/libhdhomerun/libhdhomerun.a\
-	$(LIB_ROOT)/libhdhomerun/*.h
-
-include $(DIR)/Makefile.static
-
 .PHONY: build
-build: $(LIB_ROOT)/$(LIBHDHR)/.tvh_build
-
-# ###########################################################################
-# Build Rules
-# ###########################################################################
-
-export PATH := $(LIB_ROOT)/build/bin:$(PATH)
+build: $(LIBHDHRDIR)/$(LIBHDHR)/.tvh_build
 
 #
 # libhdhomerun
 #
 
--include $(LIB_ROOT)/$(LIBHDHR)/Makefile
+-include $(LIBHDHRDIR)/$(LIBHDHR)/Makefile
 
-OBJS := $(foreach file,$(LIBSRCS),$(LIB_ROOT)/$(LIBHDHR)/$(basename $(file)).o)
+OBJS = $(foreach file,$(LIBSRCS),$(LIBHDHRDIR)/$(LIBHDHR)/$(basename $(file)).o)
 
-$(LIB_ROOT)/$(LIBHDHR)/%.o: $(LIB_ROOT)/$(LIBHDHR)/%.c
+$(LIBHDHRDIR)/$(LIBHDHR)/%.o: $(LIBHDHRDIR)/$(LIBHDHR)/%.c
 	$(CC) -MD -MP $(CFLAGS) -c -o $@ $<
 
-$(LIB_ROOT)/$(LIBHDHR)/libhdhomerun.a: $(OBJS)
+$(LIBHDHRDIR)/$(LIBHDHR)/libhdhomerun.a: $(OBJS)
 	$(AR) rcs $@ $^
 
-$(LIB_ROOT)/$(LIBHDHR)/.tvh_download:
-	$(call DOWNLOAD,$(LIBHDHR_URL),$(LIB_ROOT)/$(LIBHDHR_TB),$(LIBHDHR_SHA1))
+$(LIBHDHRDIR)/$(LIBHDHR)/.tvh_download:
+	$(call DOWNLOAD,$(LIBHDHR_URL),$(LIBHDHRDIR)/$(LIBHDHR_TB),$(LIBHDHR_SHA1))
 	$(call UNTAR,$(LIBHDHR_TB),z)
-	ln -sf libhdhomerun $(LIB_ROOT)/$(LIBHDHR)
+	ln -sf libhdhomerun $(LIBHDHRDIR)/$(LIBHDHR)
 	@touch $@
 
-$(LIB_ROOT)/$(LIBHDHR)/.tvh_build: \
-		$(LIB_ROOT)/$(LIBHDHR)/.tvh_download
-	$(MAKE) -f Makefile.hdhomerun $(LIB_ROOT)/$(LIBHDHR)/libhdhomerun.a
+$(LIBHDHRDIR)/$(LIBHDHR)/.tvh_build: \
+		$(LIBHDHRDIR)/$(LIBHDHR)/.tvh_download
+	$(MAKE) -f Makefile.hdhomerun $(LIBHDHRDIR)/$(LIBHDHR)/libhdhomerun.a
 	@touch $@
 
 .PHONY: static_libhdhr_clean
 static_libhdhr_clean:
-	@rm -rf $(LIB_ROOT)
+	@rm -rf $(LIBHDHRDIR)
